# 时间银行 - 快速测试拦截功能

## 当前状态

✅ **已完成：**
- APK 已安装到手机（三星 S24U）
- 应用列表正常显示（125 个应用）
- 监控服务启动成功（无闪退）
- 已添加 3 个应用到分类

## 测试拦截功能（5 步骤）

### 步骤 1：重置余额
1. 打开"时间银行" App
2. 切换到"**设置**"标签
3. 点击"**重置余额**"卡片
4. 在弹出对话框中点击"**确认**"
5. 验证："当前余额"显示"**0小时 0分钟**"

### 步骤 2：确认监控服务已开启
1. 在"设置"页面查看"**后台监控服务**"开关
2. 确保开关是"**开启**"状态
3. 通知栏应显示"**时间银行正在运行**"

### 步骤 3：确认已添加负向应用
1. 切换到"**分类**"标签
2. 点击"**负向应用**"子标签
3. 确认列表中有至少 1 个应用（如 Chrome）

### 步骤 4：退出 App
1. 按 **Home 键**返回桌面
2. 或按**返回键**退出应用

### 步骤 5：打开负向应用测试拦截
1. 从桌面或应用列表打开已分类的**负向应用**
2. **预期结果**：
   - 应用启动画面短暂出现（<1秒）
   - **立即**弹出全屏拦截界面
   - 显示"⚠️ 时间余额不足"
   - 显示"无法打开 [应用名称]"
   - 显示"当前余额: 0小时 0分钟"
   - 有"我知道了"按钮

---

## 如果拦截没有生效

### 检查清单：

- [ ] 余额是否真的是 0？（设置页面查看）
- [ ] 监控服务是否在运行？（通知栏是否有提示）
- [ ] 应用是否已添加到负向分类？（分类页面查看）
- [ ] 是否已授予悬浮窗权限？（主页应显示"✅ 所有权限已开启"）

### 查看日志：

日志监控正在后台运行，会自动记录所有操作。

预期看到的日志：
```
D/MonitorService: 检测到切换到新应用: com.android.chrome
D/MonitorService: 应用分类: Chrome - NEGATIVE
D/MonitorService: 负向应用，当前余额: 0
D/MonitorService: 余额不足，立即拦截负向应用: Chrome
```

---

**准备就绪！现在可以开始测试了。**
